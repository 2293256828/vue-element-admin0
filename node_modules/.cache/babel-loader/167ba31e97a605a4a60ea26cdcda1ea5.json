{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vue-element-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\vue-element-admin\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin\\src\\utils\\request.js","mtime":1634029233036},{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBNZXNzYWdlQm94LCBNZXNzYWdlLCBOb3RpZmljYXRpb24gfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOyAvLyBjcmVhdGUgYW4gYXhpb3MgaW5zdGFuY2UKCnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogIC8vIHVybCA9IGJhc2UgdXJsICsgcmVxdWVzdCB1cmwKICAvLyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsIC8vIHNlbmQgY29va2llcyB3aGVuIGNyb3NzLWRvbWFpbiByZXF1ZXN0cwogIHRpbWVvdXQ6IDUwMDAgLy8gcmVxdWVzdCB0aW1lb3V0Cgp9KTsgLy8gcmVxdWVzdCBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIGRvIHNvbWV0aGluZyBiZWZvcmUgcmVxdWVzdCBpcyBzZW50CiAgaWYgKHN0b3JlLmdldHRlcnMudG9rZW4pIHsKICAgIC8vIGxldCBlYWNoIHJlcXVlc3QgY2FycnkgdG9rZW4KICAgIC8vIFsnWC1Ub2tlbiddIGlzIGEgY3VzdG9tIGhlYWRlcnMga2V5CiAgICAvLyBwbGVhc2UgbW9kaWZ5IGl0IGFjY29yZGluZyB0byB0aGUgYWN0dWFsIHNpdHVhdGlvbgogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGdldFRva2VuKCk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBkbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgY29uc29sZS5sb2coZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIHJlc3BvbnNlIGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCi8qKgogKiBJZiB5b3Ugd2FudCB0byBnZXQgaHR0cCBpbmZvcm1hdGlvbiBzdWNoIGFzIGhlYWRlcnMgb3Igc3RhdHVzCiAqIFBsZWFzZSByZXR1cm4gIHJlc3BvbnNlID0+IHJlc3BvbnNlCiovCgovKioKICogRGV0ZXJtaW5lIHRoZSByZXF1ZXN0IHN0YXR1cyBieSBjdXN0b20gY29kZQogKiBIZXJlIGlzIGp1c3QgYW4gZXhhbXBsZQogKiBZb3UgY2FuIGFsc28ganVkZ2UgdGhlIHN0YXR1cyBieSBIVFRQIFN0YXR1cyBDb2RlCiAqLwpmdW5jdGlvbiAocmVzcG9uc2UpIHsKICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsKICB2YXIgY29kZSA9IHJlcy5jb2RlOyAvLyBpZiB0aGUgY3VzdG9tIGNvZGUgaXMgbm90IDIwMDAwLCBpdCBpcyBqdWRnZWQgYXMgYW4gZXJyb3IuCgogIGlmIChjb2RlICE9PSAwICYmIChjb2RlIDwgMjAwIHx8IGNvZGUgPiAzMDApKSB7CiAgICBOb3RpZmljYXRpb24uZXJyb3IoewogICAgICB0aXRsZTogcmVzLm1lc3NhZ2UKICAgIH0pOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdlcnJvcicpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5yZXN1bHQ7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICB2YXIgY29kZSA9IDA7CgogIHRyeSB7CiAgICBjb2RlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5zdGF0dXM7CiAgfSBjYXRjaCAoZSkgewogICAgaWYgKGVycm9yLnRvU3RyaW5nKCkuaW5kZXhPZignRXJyb3I6dGltZW91dCcpICE9PSAtMSkgewogICAgICBOb3RpZmljYXRpb24uZXJyb3IoewogICAgICAgIHRpdGxlOiAn572R57uc6K+35rGC6LaF5pe2JywKICAgICAgICBkdXJhdGlvbjogNTAwMAogICAgICB9KTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0KICB9CgogIGlmIChjb2RlKSB7CiAgICBpZiAoY29kZSA9PT0gNDAxKSB7CiAgICAgIE1lc3NhZ2VCb3guY29uZmlybSgn55m75b2V54q25oCB5bey6L+H5pyfLOS9oOWPr+S7pee7p+e7reeVmeWcqOivpemhtemdoizmiJbogIXph43mlrDnmbvpmYYnLCAn57O757uf5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn6YeN5paw55m76ZmGJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ0xvZ091dCcpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChjb2RlID09PSA0MDMpIHsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvNDAxJwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBlcnJvck1zZyA9IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKCiAgICAgIGlmIChlcnJvck1zZyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAgIHRpdGxlOiBlcnJvck1zZywKICAgICAgICAgIGR1cmF0aW9uOiA1MDAwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgTm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgdGl0bGU6ICfmjqXlj6Por7fmsYLlpLHotKUnLAogICAgICBkdXJhdGlvbjogNTAwMAogICAgfSk7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["C:/Users/Administrator/Desktop/vue-element-admin/src/utils/request.js"],"names":["axios","MessageBox","Message","Notification","store","getToken","router","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getters","token","headers","error","console","log","Promise","reject","response","res","data","code","title","message","result","status","e","toString","indexOf","duration","confirm","confirmButtonText","cancelButtonText","type","then","dispatch","location","reload","push","path","errorMsg","undefined"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { MessageBox, Message,Notification } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\nimport router from '@/router'\n// create an axios instance\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 5000 // request timeout\n})\n\n// request interceptor\nservice.interceptors.request.use(\n  config => {\n    // do something before request is sent\n\n    if (store.getters.token) {\n      // let each request carry token\n      // ['X-Token'] is a custom headers key\n      // please modify it according to the actual situation\n      config.headers['Authorization'] = getToken()\n    }\n    return config\n  },\n  error => {\n    // do something with request error\n    console.log(error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n// response interceptor\nservice.interceptors.response.use(\n  /**\n   * If you want to get http information such as headers or status\n   * Please return  response => response\n  */\n\n  /**\n   * Determine the request status by custom code\n   * Here is just an example\n   * You can also judge the status by HTTP Status Code\n   */\n  response => {\n    const res = response.data\n    const code=res.code\n    // if the custom code is not 20000, it is judged as an error.\n    if (code !==0&& (code < 200 || code > 300)) {\n      Notification.error({\n        title: res.message\n      })\n      return Promise.reject('error')\n    } else {\n      return response.data.result\n    }\n  },\n  error => {\n    let code = 0\n    try {\n      code = error.response.data.status\n    } catch (e) {\n      if (error.toString().indexOf('Error:timeout') !== -1) {\n        Notification.error({\n          title: '网络请求超时',\n          duration: 5000\n        })\n        return Promise.reject(error)\n      }\n    }\n    if (code) {\n      if (code === 401) {\n        MessageBox.confirm(\n          '登录状态已过期,你可以继续留在该页面,或者重新登陆',\n          '系统提示',\n          {\n            confirmButtonText: '重新登陆',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }\n        ).then(() => {\n          store.dispatch('LogOut').then(() => {\n            location.reload()\n          })\n        })\n      } else if (code === 403) {\n        router.push({ path: '/401' })\n      } else {\n        const errorMsg = error.response.data.message\n        if (errorMsg !== undefined) {\n          Notification.error({\n            title: errorMsg,\n            duration: 5000\n          })\n        }\n      }\n    } else {\n      Notification.error({\n        title: '接口请求失败',\n        duration: 5000\n      })\n    }\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}