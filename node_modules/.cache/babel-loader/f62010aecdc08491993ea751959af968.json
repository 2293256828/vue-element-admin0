{"remainingRequest":"D:\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\vue-element-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\vue-element-admin\\src\\utils\\request.js","dependencies":[{"path":"D:\\vue-element-admin\\src\\utils\\request.js","mtime":1633262478413},{"path":"D:\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue-element-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBNZXNzYWdlQm94LCBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsgLy8gY3JlYXRlIGFuIGF4aW9zIGluc3RhbmNlCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICAvLyB1cmwgPSBiYXNlIHVybCArIHJlcXVlc3QgdXJsCiAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLCAvLyBzZW5kIGNvb2tpZXMgd2hlbiBjcm9zcy1kb21haW4gcmVxdWVzdHMKICB0aW1lb3V0OiA1MDAwIC8vIHJlcXVlc3QgdGltZW91dAoKfSk7IC8vIHJlcXVlc3QgaW50ZXJjZXB0b3IKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyBkbyBzb21ldGhpbmcgYmVmb3JlIHJlcXVlc3QgaXMgc2VudAogIGlmIChzdG9yZS5nZXR0ZXJzLnRva2VuKSB7CiAgICAvLyBsZXQgZWFjaCByZXF1ZXN0IGNhcnJ5IHRva2VuCiAgICAvLyBbJ1gtVG9rZW4nXSBpcyBhIGN1c3RvbSBoZWFkZXJzIGtleQogICAgLy8gcGxlYXNlIG1vZGlmeSBpdCBhY2NvcmRpbmcgdG8gdGhlIGFjdHVhbCBzaXR1YXRpb24KICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBnZXRUb2tlbigpOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gZG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIGNvbnNvbGUubG9nKGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyByZXNwb25zZSBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKAovKioKICogSWYgeW91IHdhbnQgdG8gZ2V0IGh0dHAgaW5mb3JtYXRpb24gc3VjaCBhcyBoZWFkZXJzIG9yIHN0YXR1cwogKiBQbGVhc2UgcmV0dXJuICByZXNwb25zZSA9PiByZXNwb25zZQoqLwoKLyoqCiAqIERldGVybWluZSB0aGUgcmVxdWVzdCBzdGF0dXMgYnkgY3VzdG9tIGNvZGUKICogSGVyZSBpcyBqdXN0IGFuIGV4YW1wbGUKICogWW91IGNhbiBhbHNvIGp1ZGdlIHRoZSBzdGF0dXMgYnkgSFRUUCBTdGF0dXMgQ29kZQogKi8KZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIGNvZGUgPSByZXNwb25zZS5kYXRhOyAvLyBpZiB0aGUgY3VzdG9tIGNvZGUgaXMgbm90IDIwMDAwLCBpdCBpcyBqdWRnZWQgYXMgYW4gZXJyb3IuCgogIGlmIChjb2RlIDwgMjAwIHx8IGNvZGUgPiAzMDApIHsKICAgIE5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgIHRpdGxlOiByZXNwb25zZS5tZXNzYWdlCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnZXJyb3InKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICB2YXIgY29kZSA9IDA7CgogIHRyeSB7CiAgICBjb2RlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5zdGF0dXM7CiAgfSBjYXRjaCAoZSkgewogICAgaWYgKGVycm9yLnRvU3RyaW5nKCkuaW5kZXhPZignRXJyb3I6dGltZW91dCcpICE9PSAtMSkgewogICAgICBOb3RpZmljYXRpb24uZXJyb3IoewogICAgICAgIHRpdGxlOiAn572R57uc6K+35rGC6LaF5pe2JywKICAgICAgICBkdXJhdGlvbjogNTAwMAogICAgICB9KTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0KICB9CgogIGlmIChjb2RlKSB7CiAgICBpZiAoY29kZSA9PT0gNDAxKSB7CiAgICAgIE1lc3NhZ2VCb3guY29uZmlybSgn55m75b2V54q25oCB5bey6L+H5pyfLOS9oOWPr+S7pee7p+e7reeVmeWcqOivpemhtemdoizmiJbogIXph43mlrDnmbvpmYYnLCAn57O757uf5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn6YeN5paw55m76ZmGJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ0xvZ091dCcpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChjb2RlID09PSA0MDMpIHsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvNDAxJwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBlcnJvck1zZyA9IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKCiAgICAgIGlmIChlcnJvck1zZyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgTm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAgIHRpdGxlOiBlcnJvck1zZywKICAgICAgICAgIGR1cmF0aW9uOiA1MDAwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgTm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgdGl0bGU6ICfmjqXlj6Por7fmsYLlpLHotKUnLAogICAgICBkdXJhdGlvbjogNTAwMAogICAgfSk7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["D:/vue-element-admin/src/utils/request.js"],"names":["axios","MessageBox","Message","store","getToken","router","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getters","token","headers","error","console","log","Promise","reject","response","code","data","Notification","title","message","status","e","toString","indexOf","duration","confirm","confirmButtonText","cancelButtonText","type","then","dispatch","location","reload","push","path","errorMsg","undefined"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { MessageBox, Message } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\nimport router from \"@/router\";\n// create an axios instance\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 5000 // request timeout\n})\n\n// request interceptor\nservice.interceptors.request.use(\n  config => {\n    // do something before request is sent\n\n    if (store.getters.token) {\n      // let each request carry token\n      // ['X-Token'] is a custom headers key\n      // please modify it according to the actual situation\n      config.headers['Authorization'] = getToken()\n    }\n    return config\n  },\n  error => {\n    // do something with request error\n    console.log(error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n// response interceptor\nservice.interceptors.response.use(\n  /**\n   * If you want to get http information such as headers or status\n   * Please return  response => response\n  */\n\n  /**\n   * Determine the request status by custom code\n   * Here is just an example\n   * You can also judge the status by HTTP Status Code\n   */\n  response => {\n    const code = response.data\n\n    // if the custom code is not 20000, it is judged as an error.\n    if (code < 200 || code > 300) {\n      Notification.error({\n        title: response.message\n      })\n      return Promise.reject('error')\n\n    } else {\n      return response.data\n    }\n  },\n  error => {\n    let code=0\n    try{\n      code=error.response.data.status\n    }catch (e){\n      if (error.toString().indexOf('Error:timeout')!==-1){\n        Notification.error({\n          title:'网络请求超时',\n          duration:5000\n        })\n        return Promise.reject(error)\n      }\n    }\n    if (code){\n      if (code===401){\n        MessageBox.confirm(\n          '登录状态已过期,你可以继续留在该页面,或者重新登陆',\n          '系统提示',\n          {\n            confirmButtonText:'重新登陆',\n            cancelButtonText:'取消',\n            type:'warning'\n          }\n        ).then(()=>{\n          store.dispatch('LogOut').then(()=>{\n            location.reload()\n          })\n        })\n      }else if (code===403){\n        router.push({path:'/401'})\n      }else{\n        const errorMsg=error.response.data.message\n        if(errorMsg!==undefined){\n          Notification.error({\n            title:errorMsg,\n            duration:5000\n          })\n        }\n      }\n    }\n    else{\n      Notification.error({\n        title:'接口请求失败',\n        duration:5000\n      })\n    }\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}